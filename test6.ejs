<!-- views/test6.ejs -->

<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    
</head>

<body>
    <div class="container">
        <form class="form-inline">
            <div class="form-group">
                <label for="msgForm">Message: </label>
                <input type="text" class="form-control" id="msgForm">
            </div>
            <button type="submit" class="btn btn-primary">Send</button>
        </form>
        <div id="chatLogs"></div>
                    <script>
                    /*
                                url = "/rcvdata_log";
                                var xhr = new XMLHttpRequest();
                                xhr.open('POST', url);
                                xhr.setRequestHeader('Content-type', "application/json");
                                xhr.send();
                                xhr.addEventListener('load', function () {
                                    data = xhr.responseText;
                                    data = JSON.parse(data);
                                    // console.log(result.Values[0].Value)
                                    //document.getElementById("temp").innerHTML = data.Values[1].Value;
                                    //document.getElementById("humidity").innerHTML = data.Values[2].Value;
                                    document.getElementById("chatLogs").innerHTML = data;
                                    var li = document.createElement('li');
                                    li.innerHTML = data;
                                    document.getElementById('chat').appendChild(li);
                                });
*/
                                var socket = io.connect('http://localhost:3000');
                                socket.on('data_html', function(data){
                                    var li = document.createElement('li');
                                    li.innerHTML = rcv_data;
                                    document.getElementById('chat').appendChild(li);
                                })
                                var rcv_data = "<%=rcv_data' %>";
                                var li = document.createElement('li');
                                li.innerHTML = rcv_data;
                                document.getElementById('chat').appendChild(li);
                            
                    </script>
        <ul id="chat">
            <li>

                <%= rcdata %>



                 </li>
        </ul>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

</body>

</html>